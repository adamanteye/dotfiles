source ~/.mutt/color.rc
source ~/.mutt/bind.rc
source ~/.mutt/gpg.rc
source ~/.contact

# Folders
set mbox_type = Maildir
set folder = $HOME/Mail
source ~/.mutt/mailboxes
folder-hook +tsinghua 'source ~/.mutt/tsinghua.hook'
folder-hook +gmail 'source ~/.mutt/gmail.hook'
folder-hook +disroot 'source ~/.mutt/disroot.hook'

# Default Folder
source ~/.mutt/disroot.hook

# Sidebar
set sidebar_visible=yes
set sidebar_delim_chars = '/.'
set sidebar_divider_char = '|'
set sidebar_folder_indent = no
set sidebar_format = '%B%?F? [%F]?%* %?N?%N/?%S'
set sidebar_indent_string = '  '
set sidebar_new_mail_only = no
set sidebar_next_new_wrap = no
set sidebar_short_path = no
set sidebar_sort_method = 'unsorted'
set sidebar_visible = yes
set sidebar_width = 20

# General
set include = yes
set quit = ask-yes
set status_on_top
set send_charset = "utf-8"
set delete = yes

set crypt_autosign = yes
set crypt_reply_encrypt = yes
set crypt_reply_sign_encrypted = yes

# Attachment
# https://neomutt.org/feature/forgotten-attachment
set abort_noattach = ask-yes

# SMTP
# https://unix.stackexchange.com/questions/385179/multiple-smtp-accounts-with-mutt-and-msmtp
set sendmail = /usr/bin/msmtp
set use_from = yes
set envelope_from = yes

# Notify
set check_new
set mail_check_stats
set new_mail_command = 'notify-send -t 5000 Mutt "new mails in %b mailboxes" && pw-play /usr/share/sounds/freedesktop/stereo/message.oga'

# Messages
set sort = threads
set sort_aux = reverse-last-date-received

# Mailboxes
set browser_sort = alpha
set browser_sort_dirs_first = yes

# For pager
set pager_stop
